<!DOCTYPE html>
<html>

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@500;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="main.css">
  <meta charset="UTF-8">
  <title>–ú–∞–≥–∞–∑–∏–Ω</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <header>
    <div class="categories">
      <div class="category combo-set" onclick="displayProduct('combo-set')">
        <h2>–ö–æ–º–±–æ –°–µ—Ç—ã</h2>
      </div>

      <div class="category roll-set" onclick="displayProduct('roll-set')">
        <h2>–ù–∞–±–æ—Ä—ã –†–æ–ª–ª–æ–≤</h2>
      </div>

      <div class="category number-rolls" onclick="displayProduct('number-rolls')">
        <h2>–¶–∏—Ñ—Ä–∞ –†–æ–ª–ª—ã</h2>
      </div>

      <div class="category fish-rolls" onclick="displayProduct('fish-rolls')">
        <h2>–§–∏—à –†–æ–ª–ª—ã</h2>
      </div>

      <div class="category nova-set" onclick="displayProduct('nova-set')">
        <h2>–ù–æ–≤–∞ –°–µ—Ç—ã</h2>
      </div>

      <div class="category sushi-set" onclick="displayProduct('sushi-set')">
        <h2>–ö–æ–º–ø–ª–µ–∫—Ç—ã –°—É—à–∏</h2>
      </div>

      <div class="category classic-sushi" onclick="displayProduct('classic-sushi')">
        <h2>–°—É—à–∏ –ö–ª–∞—Å—Å–∏–∫–∞</h2>
      </div>
    </div>
    <div class="info-section">
      <div class="info-block">
        <img src="img/—Ålock.svg" alt="Work Time">
        <p>8 (351) 242 00 64</p>
      </div>
      <div class="info-block">
        <img src="img/clock1.svg" alt="Telephone">
        <p>10:00 - 22:00 (–ü–¢-–°–ë 23:00)</p>
      </div>
    </div>
    <div class="header-image-container">
      <img class="mySlides" src="img/Frame 57.jpg" style="width:100%"
        onclick="window.open('https://vk.com/sushiclassic74', '_self')">
      <img class="mySlides" src="img/Frame 58.jpg" style="width:100%"
        onclick="window.open('https://vk.com/sushiclassic74', '_self')">
    </div>

    <div id="cartSection" style="display:none;">
      <h2></h2>
    </div>

    <div class="bottomCart" id="totalPriceSection">
      <h2 class="g1">–û–±—â–∞—è —Å—É–º–º–∞: 0 ‚ÇΩ</h2>
    </div>
    <script>
      // Your JS for products, etc
      window.onload = function () {
        loadProducts();
        displayProduct('combo-set');

        carousel(); // move the function call inside here
      };
      var myIndex = 0;
      carousel();

      function carousel() {
        var i;
        var x = document.getElementsByClassName("mySlides");
        for (i = 0; i < x.length; i++) {
          x[i].style.display = "none";
        }
        myIndex++;
        if (myIndex > x.length) { myIndex = 1 }
        x[myIndex - 1].style.display = "block";
        setTimeout(carousel, 4000); // Change image every 2 seconds
      }    
    </script>
  </header>

  <section id='productSection'>
    <!-- Iframe content / Product display goes here -->
  </section>
  <div id="myModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="close">‚òö</span>
        <h2 class="ots">–ö–æ—Ä–∑–∏–Ω–∞</h2>

      </div>
      <div id="paymentModal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <span class="paymentClose">‚òö</span>
            <h2 class="ots">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h2>
          </div>
          <button class="form-control1" onclick="setPaymentMethod('–ù–∞–ª–∏—á–Ω—ã–º–∏ –∫—É—Ä—å–µ—Ä—É')">–ù–∞–ª–∏—á–Ω—ã–º–∏ –∫—É—Ä—å–µ—Ä—É</button>
          <button class="form-control1" onclick="setPaymentMethod('–ö–∞—Ä—Ç–æ–π –∫—É—Ä—å–µ—Ä—É')">–ö–∞—Ä—Ç–æ–π –∫—É—Ä—å–µ—Ä—É</button>
          <h>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</h>
        </div>
      </div>
      <div id="productModal" class="modal">
        <div class="modal-content1">
          <div class="modal-header1">
            <span class="productClose">‚òö</span>
            <h2 class="ots">–ö–æ–º–ø–ª–µ–∫—Ç—ã –°—É—à–∏</h2>
          </div>
          <div id="productModalContent">
            <!-- Product content goes here -->
          </div>
          <h>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</h>
        </div>
      </div>
      <div id="cartModalContent"></div>
      <div class="extra-details">
        <div class="ROW">
          <img src="img/zakaz2.svg" width="40px" height="40px" class="img1">
          <h5>üõµ ~ 60-120 –º–∏–Ω.
            –¥–æ—Å—Ç–∞–≤–∫–∞ 100 —Ä—É–±–ª–µ–π
          </h5>
        </div>

        <div class="input-group">
          <img src="img/zakaz5.svg" width="40px" height="40px">
          <input type="text" id="deliveryAddress" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">
        </div>




        <div class="input-group">
          <img src="img/zakaz3.svg" width="40px" height="40px">
          <button type="button" id="selectPaymentBtn" class="form-control">–í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</button>
        </div>

        <div class="input-group">
          <img src="img/zakaz4.svg" width="40px" height="40px">
          <input type="text" id="orderComment" class="form-control" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É">
        </div>

        <div class="input-group">
          <img src="img/zakaz1.svg" width="40px" height="40px">
          <input type="text" id="promoCode" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
        </div>


      </div>
      <div class="ooo">
        <button id="addToOrderBtn" onclick="openProductModal('sushi-set')">–î–æ–±–∞–≤–∏—Ç—å –∫ –∑–∞–∫–∞–∑—É</button>
        <button id="checkoutBtn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

      </div>
      <h>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</h>
    </div>
  </div>

</body>
<script>

  var products = {}; // Will be used to store product information



  var cart = []; // –ü—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ –≤ –Ω–∞—á–∞–ª–µ
  function loadProducts() {
    products = {
      'combo-set': [{ 'img': 'img/1.jpg', 'name': '–ö–æ–º–±–æ 19', 'price': '1165 ‚ÇΩ', 'grams': '100 –≥' },
      { 'img': 'img/2.jpg', 'name': '–ö–æ–º–±–æ 18', 'price': '1210 ‚ÇΩ', 'grams': '110 –≥' },
      { 'img': 'img/3.jpg', 'name': '–ö–æ–º–±–æ 17', 'price': '1290 ‚ÇΩ', 'grams': '100 –≥' },
      { 'img': 'img/4.jpg', 'name': '–ö–æ–º–±–æ 16', 'price': '1350 ‚ÇΩ', 'grams': '120 –≥' }],
      'roll-set': [
        { 'img': 'img/1.jpg', 'name': '–ö–æ–º–±–æ 19', 'price': '1165 ‚ÇΩ' },
        { 'img': 'img/2.jpg', 'name': '–ö–æ–º–±–æ 18', 'price': '1210 ‚ÇΩ' },
        { 'img': 'img/3.jpg', 'name': '–ö–æ–º–±–æ 17', 'price': '1290 ‚ÇΩ' },
        { 'img': 'img/4.jpg', 'name': '–ö–æ–º–±–æ 16', 'price': '1350 ‚ÇΩ' }
      ],
      'number-rolls': [
        { 'img': 'img/1.jpg', 'name': '–ö–æ–º–±–æ 19', 'price': '1165 ‚ÇΩ' },
        { 'img': 'img/2.jpg', 'name': '–ö–æ–º–±–æ 18', 'price': '1210 ‚ÇΩ' },
        { 'img': 'img/3.jpg', 'name': '–ö–æ–º–±–æ 17', 'price': '1290 ‚ÇΩ' },
        { 'img': 'img/4.jpg', 'name': '–ö–æ–º–±–æ 16', 'price': '1350 ‚ÇΩ' }
      ],
      'fish-rolls': [
        { 'img': 'img/1.jpg', 'name': '–ö–æ–º–±–æ 19', 'price': '1165 ‚ÇΩ' },
        { 'img': 'img/2.jpg', 'name': '–ö–æ–º–±–æ 18', 'price': '1210 ‚ÇΩ' },
        { 'img': 'img/3.jpg', 'name': '–ö–æ–º–±–æ 17', 'price': '1290 ‚ÇΩ' },
        { 'img': 'img/4.jpg', 'name': '–ö–æ–º–±–æ 16', 'price': '1350 ‚ÇΩ' }
      ],
      'nova-set': [
        { 'img': 'img/1.jpg', 'name': '–ö–æ–º–±–æ 19', 'price': '1165 ‚ÇΩ' },
        { 'img': 'img/2.jpg', 'name': '–ö–æ–º–±–æ 18', 'price': '1210 ‚ÇΩ' },
        { 'img': 'img/3.jpg', 'name': '–ö–æ–º–±–æ 17', 'price': '1290 ‚ÇΩ' },
        { 'img': 'img/4.jpg', 'name': '–ö–æ–º–±–æ 16', 'price': '1350 ‚ÇΩ' }
      ],
      'sushi-set': [
        { 'img': 'img/k7.jpg', 'name': '–ü–∞–ª–æ—á–∫–∏', 'price': '3 ‚ÇΩ', 'grams': '0 –≥' },
        { 'img': 'img/k4.jpg', 'name': '–í–∞—Å–∞–±–∏', 'price': '15 ‚ÇΩ', 'grams': '20 –≥' },
        { 'img': 'img/k6.jpg', 'name': '–ò–º–±–∏—Ä—å', 'price': '15 ‚ÇΩ', 'grams': '100 –≥' },
        { 'img': 'img/k3.jpg', 'name': '–ö–æ–º–ø–ª–µ–∫—Ç –¥–ª—è —Å—É—à–∏', 'price': '30 ‚ÇΩ', 'grams': '100 –≥' },
        { 'img': 'img/k5.jpg', 'name': '–°–æ–µ–≤—ã–π —Å–æ—É—Å', 'price': '15 ‚ÇΩ', 'grams': '100 –º–ª' },
        { 'img': 'img/k1.jpg', 'name': '–°–æ—É—Å —Ç–∞—Ä-—Ç–∞—Ä', 'price': '25 ‚ÇΩ', 'grams': '50 –º–ª' },
        { 'img': 'img/k2.jpg', 'name': '–°–æ—É—Å —Å–ø–∞–π—Å–∏', 'price': '25 ‚ÇΩ', 'grams': '50 –º–ª' }
      ],
      'classic-sushi': [
        { 'img': 'img/s1.jpg', 'name': '–ö–æ–º–±–æ 19', 'price': '1165 ‚ÇΩ', 'grams': '100 –≥' },
        { 'img': 'img/s2.jpg', 'name': '–ö–æ–º–±–æ 18', 'price': '1210 ‚ÇΩ', 'grams': '100 –≥' },
        { 'img': 'img/s3.jpg', 'name': '–ö–æ–º–±–æ 17', 'price': '1290 ‚ÇΩ', 'grams': '100 –≥' },
        { 'img': 'img/s4.jpg', 'name': '–ö–æ–º–±–æ 16', 'price': '1350 ‚ÇΩ', 'grams': '100 –≥' }
      ]
    }

  };
  function addToCart(category, productIndex) {
    var product = products[category][productIndex];

    // –¥–æ–±–∞–≤–ª—è–µ–º —Å–≤–æ–π—Å—Ç–≤–æ category –≤ –∫–∞–∂–¥—ã–π –ø—Ä–æ–¥—É–∫—Ç
    product.category = category;

    var existingProduct = cart.find((item) => item.name === product.name && item.category === product.category);

    if (existingProduct) {
      existingProduct.quantity++;
    } else {
      product.quantity = 1;
      cart.push(product);
    }

    displayCart();
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    displayCart();
  }
  function increaseQuantityInCart(index) {
    cart[index].quantity++;
    displayCart();
  }
  function decreaseQuantityInCart(index) {
    if (cart[index].quantity > 1) {
      cart[index].quantity--;
    } else {
      removeFromCart(index);
    }

    displayCart();
  }
  function displayCart() {
    const cartSection = document.getElementById('cartModalContent');
    let totalPrice = 0;
    let innerHTML = `<h2 class="ots"></h2><div class="cart">`;

    for (let i = 0; i < cart.length; i++) {
      totalPrice += parseInt(cart[i].price.replace(" ‚ÇΩ", "")) * cart[i].quantity;
      innerHTML += `
<div class="product-details">
  <img src=${cart[i].img} alt=${cart[i].name}>
  <div>
    <div class="ed">
    <h2 class="tovartext">${cart[i].name}</h2>
    <p class="tovartext1">${cart[i].price}</p>
    </div>
    <div class="botb">
    <button onclick="decreaseQuantityInCart(${i})">-</button>${cart[i].quantity} 
    <button onclick="increaseQuantityInCart(${i})">+</button></div>

  </div>              
</div>`;
    }

    cartSection.innerHTML = innerHTML;

    document.getElementById('totalPriceSection').innerHTML = `<h2 class="g1">–û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó: ${totalPrice} ‚ÇΩ</h2>`;
  }
  function displayProduct(productType) {
    const section = document.getElementById('productSection');
    var innerHTML = '';
    const categoryElements = document.querySelectorAll(".category");
    categoryElements.forEach((el) => {
      // –£–¥–∞–ª–µ–º –∫–ª–∞—Å—Å .category-selected —É –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
      el.classList.remove("category-selected");
      // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å .category-selected –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
      if (el.classList.contains(productType)) {
        el.classList.add("category-selected");
      }
    });
    for (let i = 0; i < products[productType].length; i++) {
      innerHTML += `<div class="product">
    <img src=${products[productType][i].img} alt=${products[productType][i].name}>
    <h2>${products[productType][i].name}</h2>
    <p>${products[productType][i].price} &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ${products[productType][i].grams}</p>
    <div class="product-quantity">
      <button class="boldMontserrat" onclick="addToCart('${productType}', ${i})">–î–û–ë–ê–í–ò–¢–¨</button>
    </div>
  </div>`;

    }


    section.innerHTML = innerHTML;
  }
  window.onload = loadProducts;

</script>
<script>
  // Your JS for products, etc
  var myIndex = 0;
  carousel();

  // Rest of your JS code
  var modal = document.getElementById("myModal");

  function openCart() {
    displayCart();
    modal.style.display = "block";
  }

  document.getElementById('totalPriceSection').addEventListener('click', openCart);

  var span = document.getElementsByClassName("close")[0];

  // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –∫—Ä–µ—Å—Ç–∏–∫
  span.onclick = function () {
    modal.style.display = "none";
  }

  window.onclick = function (event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }

  document.getElementById('cartModalContent').style.marginTop = "10px";
</script>
<script>
  

  window.onload = function () {
    loadProducts();
    displayProduct('combo-set');
    carousel(); // move the function call inside here

    // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    var paymentModal = document.getElementById("paymentModal");
    var paymentBtn = document.getElementById("selectPaymentBtn");
    var paymentClose = document.getElementsByClassName("paymentClose")[0];

    // –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É, –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ 
    paymentBtn.onclick = function () {
      paymentModal.style.display = "block";
    }

    // –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ <span> (x), –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    paymentClose.onclick = function () {
      paymentModal.style.display = "none";
    }

    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –≥–¥–µ-—Ç–æ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞, –∑–∞–∫—Ä—ã–≤–∞–µ–º –µ–≥–æ
    window.onclick = function (event) {
      if (event.target == paymentModal) {
        paymentModal.style.display = "none";
      }
    }

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    window.setPaymentMethod = function (method) {
      paymentBtn.innerText = method;
      paymentModal.style.display = "none";
    }
  }
</script>
<script>
  function openProductModal(productType) {
    displayProduct(productType);
    document.getElementById('productModalContent').innerHTML = document.getElementById('productSection').innerHTML;
    document.getElementById('productModal').style.display = "block";
  }
  var productModal = document.getElementById('productModal');
  var productClose = document.getElementsByClassName('productClose')[0];

  productClose.onclick = function () {
    productModal.style.display = "none";
  };

  window.onclick = function (event) {
    if (event.target == productModal) {
      productModal.style.display = "none";
    }
  };
</script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  let tg = window.Telegram.WebApp;
  let checkoutBtn = document.getElementById("checkoutBtn")

  checkoutBtn.addEventListener("click",function() {
  let promoCode = document.getElementById("promoCode").value;
  let orderComment = document.getElementById("orderComment").value; // –ü–æ–ª—É—á–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–∫–∞–∑—É
  let deliveryAddress = document.getElementById("deliveryAddress").value; // –ü–æ–ª—É—á–∞–µ–º –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏

  let productsInCart = cart.map(product => {
    return {
      name: product.name,
      quantity: product.quantity,
      price: product.price
    }
  }); // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏ –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∫–æ—Ä–∑–∏–Ω–µ
  
  tg.expand();
  let data = {
    promoCode: promoCode,
    orderComment: orderComment,
    deliveryAddress: deliveryAddress,
    productsInCart: productsInCart
  }
  tg.sendData(JSON.stringify(data));
  tg.close();

  });
</script>

</html>
